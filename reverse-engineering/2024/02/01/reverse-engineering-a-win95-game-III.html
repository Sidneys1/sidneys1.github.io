<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <link rel="preload" href="https://sidneys1.github.io/assets/main.css" as="style"/>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="onion-location" content="http://sidneys77crlfslcr7zmj3msmxchgnxhrxlp3p3kbaswo7twchjnicid.onion/reverse-engineering/2024/02/01/reverse-engineering-a-win95-game-III.html" />
  <link rel="icon" type="image/png" sizes="16x16" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYBAMAAAASWSDLAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAwUExURU03LQsKCjRLXmBfW7hSE5xdMqNxTeGqSrKLX09qi5R9hHCnv7bDvaWgnfPWpvHt2OhtVZsAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAECSURBVCjPY5goCAQsjCDSjAFEiri4gChBEEdJ3KXcEcoRUmAvKWGEcZREytlhHEFFgVAQxQiWEYQARogBIKYQlLMbZJeQgKIgQxuT0umNQPbsiYoRDBlnlH+ClM49M2kZQ9ppIRBHefUZBQ6GjDvCn4AmMQFl2BhabJQ+CUpcYN5zRhEok6vwU5DvFeed0xPDGCJarf4YX4/VXaysmMaQmlb+/v37VxKFwgxhDKmhJc/r+xIEBQXCgDKhz/z+/3/AwGAcCuI8j+h5/y5Z0ArMuVf37t2JVYJv0zIY0oCc5w6CUgK/3ICc4BN1/949F1i7ICyDoS10bvi//89l/xqGdQAA2bZcXLL532IAAAAASUVORK5CYII=" /><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Reverse Engineering a Windows 95 Game | Sidneys1.com on GitHub Pages</title>
<meta name="generator" content="Jekyll v4.2.2" />
<meta property="og:title" content="Reverse Engineering a Windows 95 Game" />
<meta name="author" content="Sidneys1" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="I recently rediscovered an obscure 1997 Simon &amp; Schuster / Marshall Media edutainment game for Windows 95 that I played as a kid: Math Invaders. In this part, we‚Äôll investigate whether we can enter an ‚Äúeditor mode‚Äù, hinted at within the strings contained within the program. There‚Äôs even a ‚ú®surprise ending‚ú® that I didn‚Äôt see coming!" />
<meta property="og:description" content="I recently rediscovered an obscure 1997 Simon &amp; Schuster / Marshall Media edutainment game for Windows 95 that I played as a kid: Math Invaders. In this part, we‚Äôll investigate whether we can enter an ‚Äúeditor mode‚Äù, hinted at within the strings contained within the program. There‚Äôs even a ‚ú®surprise ending‚ú® that I didn‚Äôt see coming!" />
<link rel="canonical" href="https://sidneys1.github.io/reverse-engineering/2024/02/01/reverse-engineering-a-win95-game-III.html" />
<meta property="og:url" content="https://sidneys1.github.io/reverse-engineering/2024/02/01/reverse-engineering-a-win95-game-III.html" />
<meta property="og:site_name" content="Sidneys1.com on GitHub Pages" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2024-02-01T00:00:00-05:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Reverse Engineering a Windows 95 Game" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Sidneys1"},"dateModified":"2024-02-01T00:00:00-05:00","datePublished":"2024-02-01T00:00:00-05:00","description":"I recently rediscovered an obscure 1997 Simon &amp; Schuster / Marshall Media edutainment game for Windows 95 that I played as a kid: Math Invaders. In this part, we‚Äôll investigate whether we can enter an ‚Äúeditor mode‚Äù, hinted at within the strings contained within the program. There‚Äôs even a ‚ú®surprise ending‚ú® that I didn‚Äôt see coming!","headline":"Reverse Engineering a Windows 95 Game","mainEntityOfPage":{"@type":"WebPage","@id":"https://sidneys1.github.io/reverse-engineering/2024/02/01/reverse-engineering-a-win95-game-III.html"},"url":"https://sidneys1.github.io/reverse-engineering/2024/02/01/reverse-engineering-a-win95-game-III.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="https://sidneys1.github.io/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://sidneys1.github.io/feed.xml" title="Sidneys1.com on GitHub Pages" /><script defer src="https://sidneys1.github.io/assets/mastodon_comments.js" onload="initComments()"></script><!-- KaTeX -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">

  <!-- The loading of KaTeX is deferred to speed up page rendering -->
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js" integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz" crossorigin="anonymous"></script>

  <!-- To automatically render math in text elements, include the auto-render extension: -->
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous"
      onload="renderMathInElement(document.body);"></script>
</head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="https://sidneys1.github.io/">Sidneys1.com on GitHub Pages</a>

	<span class="coffee"><a href="https://ko-fi.com/sidneys1" target="_blank" rel="noreferrer">
		<img height="25px" title="Buy me a Coffee" src="https://sidneys1.github.io/assets/coffee-cup-1.svg"/>
	</a></span><div id="nav-placeholder">
			<nav class="site-nav">
				<input type="checkbox" id="nav-trigger" class="nav-trigger" />
				<label for="nav-trigger">
				<span class="menu-icon">
					<svg viewBox="0 0 18 15" width="18px" height="15px">
					<path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
					</svg>
				</span>
				</label>

				<div class="trigger"><a class="page-link" href="https://sidneys1.github.io/tags.html">Tags</a><a class="page-link" href="https://sidneys1.github.io/categories.html">Categories</a><a class="page-link" href="https://sidneys1.github.io/series.html">Series</a></div>
			</nav>
			</div></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

	<header class="post-header">
		<h1 class="post-title p-name" itemprop="name headline">Reverse Engineering a Windows 95 Game</h1>
		<h2 class="post-title p-name">Editor Mode, and Conclusion</h1><p class="post-meta">
			<time class="dt-published" datetime="2024-02-01T00:00:00-05:00" itemprop="datePublished">Feb 1, 2024
			</time>‚Ä¢ <span itemprop="author" itemscope itemtype="http://schema.org/Person">
				<span class="p-author h-card" itemprop="name">Sidneys1</span></span>&nbsp;‚Ä¢&nbsp;<a href="https://sidneys1.github.io/tags.html#programming" style="display: inline;"
				class="tag">programming</a>&nbsp;‚Ä¢&nbsp;<a href="https://sidneys1.github.io/tags.html#reverse-engineering" style="display: inline;"
				class="tag">reverse-engineering</a>&nbsp;‚Ä¢&nbsp;<a href="https://sidneys1.github.io/tags.html#ghidra" style="display: inline;"
				class="tag">ghidra</a></p><div class="multipart">
			<em>This post has multiple parts:</em>
			<ul>
				
				
					
				
					
				
					
				
					
				
					
						
							<li><a href="https://sidneys1.github.io/reverse-engineering/2023/02/23/reverse-engineering-a-win95-game-I.html">Reverse Engineering a Windows 95 Game &ndash; Reversing Asset Storage</a> (Part I)</li>
						
						
					
				
					
						
							<li><a href="https://sidneys1.github.io/reverse-engineering/2023/03/16/reverse-engineering-a-win95-game-II.html">Reverse Engineering a Windows 95 Game &ndash; Reversing (Undocumented) Settings</a> (Part II)</li>
						
						
					
				
					
				
					
						
							<li style="list-style-type: disclosure-closed;"><em>Reverse Engineering a Windows 95 Game &ndash; Editor Mode, and Conclusion</em> (Part III)</li>
						
						
					
				
				
			</ul>
		</div></header><!-- <div class="post-toc"> -->
	
	<!-- </div> -->

	<div class="post-content e-content" itemprop="articleBody">
		<!-- cSpell:words Schuster DirectX autorun pakrat -->
<!-- cSpell:ignore PAKS AMOVIE DSETUP DSETUPE DSETUPJ MATHINV SSPUNINS Bmps Ihighsco RIFF√Ä -->

<p>I recently rediscovered an obscure 1997 Simon &amp; Schuster / Marshall Media edutainment game for Windows 95 that I played
as a kid: <a href="https://archive.org/details/MathInvaders">Math Invaders</a>. In this part, we‚Äôll investigate whether we can
enter an ‚Äúeditor mode‚Äù, hinted at within the <code class="language-plaintext highlighter-rouge">strings</code> contained within the program. There‚Äôs even a
‚ú®<span class="shimmer">surprise ending</span>‚ú® that I didn‚Äôt see coming!</p>

<!--more-->
<hr />

<p>Here‚Äôs where we left off, investigating the disassembly of a function that references a mysterious string:
<code class="language-plaintext highlighter-rouge">*** EDITOR MODE ***</code>. Cleaning the disassembly up and commenting to be a bit to be more readable gives us:</p>

<div style="--left: 8;" class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Because `param_1` from the disassembly (aka `this`) is passed to</span>
<span class="c1">// `CWnd::SetWindowTextA` at the end, this function probably belongs</span>
<span class="c1">// to a class inheriting `CWnd`.</span>
<span class="k">class</span> <span class="nc">CGameWnd</span> <span class="o">:</span> <span class="k">public</span> <span class="n">CWnd</span><span class="p">;</span>

<span class="kt">void</span> <span class="n">CGameWnd</span><span class="o">::</span><span class="n">_updateWindowTitle</span><span class="p">()</span> <span class="p">{</span>
	<span class="c1">// Don't do anything if we're in fullscreen mode.</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">gFullscreen</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
	<span class="kt">char</span> <span class="n">buffer</span><span class="p">[</span><span class="mi">256</span><span class="p">];</span>
	<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">unknown_334</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
		<span class="c1">// If the variable at offset 0x334 is not 0/FALSE/NULL,</span>
		<span class="c1">// we have a file loaded.</span>
</code></pre></div></div>

<div class="language-cpp code-split highlighter-rouge" style="--left: 8;"><div class="highlight"><pre class="highlight"><code>		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">unknown_3714</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
			<span class="c1">// If the variable at offset 0x3714 is 0/FALSE/NULL,</span>
			<span class="c1">// we're in "editor mode"... whatever that is!</span>
			<span class="c1">// Append text indicating this to the buffer.</span>
			<span class="n">strcat</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="s">" - *** EDITOR MODE ***"</span><span class="p">);</span>
		<span class="p">}</span>
</code></pre></div></div>

<div class="language-cpp code-split highlighter-rouge" style="--left: 4;"><div class="highlight"><pre class="highlight"><code>	<span class="p">}</span>
</code></pre></div></div>

<div class="language-cpp code-split highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="c1">// Set the window title to the contents of the buffer.</span>
	<span class="k">this</span><span class="o">-&gt;</span><span class="n">SetWindowTextA</span><span class="p">(</span><span class="n">buffer</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Ok! So to activate editor mode, we need to <strong>1)</strong> not be fullscreen, <strong>2)</strong> have <code class="language-plaintext highlighter-rouge">CGameWnd-&gt;unknown_334</code> be non-zero,
and <strong>3)</strong> have <code class="language-plaintext highlighter-rouge">CGameWnd-&gt;unknown_3714</code> be zero. Enabling fullscreen (via the <samp>3d.ini</samp> file described in
part II) no longer seems to crash my game (that must have been a mistake of mine!). The game starts and plays in
fullscreen, and the title even updates between ‚ÄúPaused, Press ‚Äòp‚Äô to resume.‚Äù and ‚ÄúRunning‚Ä¶‚Äù when we press
<kbd>P</kbd>!</p>

<div>

  <aside>

    <p>While I could use a debugger to change the value at runtime, this is the only place the value is read, so we can assume
that any editor mode functionality has also been stripped out‚Ä¶</p>

  </aside>

  <p>But try as I might, <span class="aside-attn">no amount of reverse engineering is allowing me to toggle the
<code class="language-plaintext highlighter-rouge">unknown_3714</code> variable</span>. No code even exists (that I can find) to change it, except during initialization or
loading of levels, when it‚Äôs always set to <code class="language-plaintext highlighter-rouge">TRUE</code>. So I have a theory: there <em>was</em> an editor mode, but its functionality
has been ‚Äúremoved‚Äù behind something like <code class="language-plaintext highlighter-rouge">#ifdef EDITOR</code>.</p>

</div>

<p>Well then! Without a deus ex machina, it looks like we‚Äôll never break into the ‚Äúeditor mode‚Äù. I reached out to the
community to see if anyone knew more about the game itself, or had heard of a source code leak for this nearly 30 year
old game. A few people were even so kind as to search Usenet for me. But nothing was turning up. A few months passed and
I‚Äôd pretty much given up on ever finishing this part III post.</p>

<h2 id="vindication"><a href="https://c.tenor.com/vV7u0Ur7I0YAAAAd/tenor.gif" target="_blank" referrerpolicy="no-referrer">Vindication!</a></h2>

<div class="chat rfloat">
	<div class="bubble from-them">
		<q>You could try downloading this SSK@<span class="blur">YoUTHinkYOUrecLeVeRdONtYou?</span>/SSPYTH.zip</q>
	</div>
	<div class="bubble from-them">
		<q>Its password seems to be the file name.</q>
	</div>
</div>

<p>Months after I‚Äôd given up I received an encrypted message, sent to the SimpleX address listed in my website footer. It
didn‚Äôt contain much more than a Freenet hash. I hurriedly installed a client and accessed the hash ‚Äî the file
downloaded ‚Äî the password worked ‚Äî and inside? <span class="shimmer">Beautiful, wonderful source
code</span>, with ‚Äúlast modified‚Äù dates ranging from <em>December 1995 to January 1997</em>! And sure enough, there are several
instances of <code class="language-plaintext highlighter-rouge">#ifdef EDITOR</code> that block the ‚ÄúEditor Mode‚Äù from being used, as I suspected! In fact, editor mode is
implemented as a completely separate static library, that is only linked into the executable when editor mode is to be
used. No wonder none of the relevant code can be found when reverse engineering the released binary!</p>

<p>Now that we have source code and can fully analyze the game in the ground truth, let‚Äôs poke around and see what we can
find. The source code is laid out as follows:</p>

<ul>
  <li>üìÅ <samp>3DLIB</samp> - <em>The core 3D engine.</em>
    <ul>
      <li>üìÑ <em>Various Assembly, and C++ source and header files.</em></li>
    </ul>
  </li>
  <li>üìÅ <samp>EditLib</samp> - <em>Editor Mode functionality.</em>
    <ul>
      <li>üìÑ <em>Various C++ source and header files.</em></li>
    </ul>
  </li>
  <li>üìÅ <samp>RES</samp> - <em>The game icon in BMP and ICO formats.</em></li>
  <li>üî® <em>Various Microsoft Developer Studio (Visual C++) files.</em></li>
  <li>üìÑ <em>Various C++ source and header files.</em></li>
  <li>üìÑ <em>Some example save files.</em></li>
  <li>‚öôÔ∏è <samp>SSPYTH.EXE</samp> - <em>A compiled binary.</em></li>
  <li>üîß <samp>3D.INI</samp> - <em>An example configuration file.</em></li>
</ul>

<h3 id="cheat-codes">Cheat Codes</h3>

<div>

  <aside>

    <p>A little more digging in Ghidra and I would have found them, as they print certain messages when activated and these
messages are visible as strings in the binary (even the unused codes!).</p>

  </aside>

  <p><span class="aside-attn">The game has a few cheat codes!</span> They can be activated by typing the code in during play,
as it keeps a buffer of the last 20 key presses. All cheat codes begin with <kbd>K</kbd> and are committed with
<kbd>L</kbd>:</p>

</div>

<div>

  <aside>

    <p>The strings <code class="language-plaintext highlighter-rouge">Add Key</code>, <code class="language-plaintext highlighter-rouge">Add Everything</code>, and <code class="language-plaintext highlighter-rouge">Problem Debug Mode %s</code> do actually exist in the release binary, but the
code to activate them (as well as the <code class="language-plaintext highlighter-rouge">KHJ#L</code> code) is not present. The source code I have does not have any mechanism
to remove it (e.g., a preprocessor directive), so my assumption is that some of the cheat codes were removed from the
‚Äúfinal‚Äù build of the game, but that these changes were not committed to the version of the source code I have access to.</p>

  </aside>

  <table>
    <thead>
      <tr>
        <th style="text-align: right">¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†Cheat¬†Code</th>
        <th style="text-align: center">Message</th>
        <th style="text-align: left">Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td style="text-align: right"><span class="aside-attn"><kbd><kbd>K</kbd><kbd>E</kbd><kbd>Y</kbd><kbd>1-4</kbd><kbd>L</kbd></kbd></span></td>
        <td style="text-align: center"><samp>Add Key</samp></td>
        <td style="text-align: left">Gives the specified key (1-4).</td>
      </tr>
      <tr>
        <td style="text-align: right"><kbd><kbd>K</kbd><kbd>W</kbd><kbd>N</kbd><kbd>0-9</kbd><kbd>L</kbd></kbd></td>
        <td style="text-align: center"><samp>Add Weapon</samp></td>
        <td style="text-align: left">Gives the specified weapon (0-9) with max ammo.</td>
      </tr>
      <tr>
        <td style="text-align: right"><kbd><kbd>K</kbd><kbd>V</kbd><kbd>U</kbd><kbd>R</kbd><kbd>L</kbd></kbd></td>
        <td style="text-align: center"><samp>Add Strength, Shield</samp></td>
        <td style="text-align: left">Sets max strength, max shield, and dons the spacesuit.</td>
      </tr>
      <tr>
        <td style="text-align: right"><span class="aside-attn"><kbd><kbd>K</kbd><kbd>H</kbd><kbd>J</kbd><kbd>1-6</kbd><kbd>L</kbd></kbd></span></td>
        <td style="text-align: center"><em>None</em></td>
        <td style="text-align: left">Gives the specified item (1-6), however items 2, 3, and 6 are not allowed to be given via this cheat.<br />The items 1-6 are: ‚Äúhealth pack‚Äù, ‚Äúlight divider‚Äù, ‚Äútime warper‚Äù, ‚Äúdrainer field‚Äù, ‚Äúultra drainer field,‚Äù and ‚Äúreflection‚Äù.</td>
      </tr>
      <tr>
        <td style="text-align: right"><span class="aside-attn"><kbd><kbd>K</kbd><kbd>Y</kbd><kbd>H</kbd><kbd>R</kbd><kbd>L</kbd></kbd></span></td>
        <td style="text-align: center"><samp>Add Everything</samp></td>
        <td style="text-align: left">Adds all keys, weapons, and allowed items.</td>
      </tr>
      <tr>
        <td style="text-align: right"><span class="aside-attn"><kbd><kbd>K</kbd><kbd>N</kbd><kbd>N</kbd><kbd>L</kbd></kbd></span></td>
        <td style="text-align: center"><samp>Problem Debug Mode ON</samp><br /><samp>Problem Debug Mode OFF</samp></td>
        <td style="text-align: left">Toggles a mode in which math problems‚Äô expected answers are printed.</td>
      </tr>
      <tr>
        <td style="text-align: right"><kbd><kbd>K</kbd><kbd>01-27</kbd><kbd>L</kbd></kbd></td>
        <td style="text-align: center"><em>None</em></td>
        <td style="text-align: left">Go to level 01-27.</td>
      </tr>
    </tbody>
  </table>

</div>

<h3 id="building-a-27-year-old-game">Building a 27 Year Old Game</h3>

<div class="carousel__holder" style="float: right; max-width: 50%; margin: 0 0 0 1em;">
    <div id="carousel0" class="carousel">
        
          <input class="carousel__activator" type="radio" name="carousel0" id="0a" checked="checked" />
        
          <input class="carousel__activator" type="radio" name="carousel0" id="0b" />
        
          <input class="carousel__activator" type="radio" name="carousel0" id="0c" />
        
          <input class="carousel__activator" type="radio" name="carousel0" id="0d" />
        
        
          
          
          
          
          <div class="carousel__controls">
              <label class="carousel__control carousel__control--backward" for="0d">‚Æú</label>
              <label class="carousel__control carousel__control--forward" for="0b">‚Æû</label>
          </div>
        
          
          
          
          
          <div class="carousel__controls">
              <label class="carousel__control carousel__control--backward" for="0a">‚Æú</label>
              <label class="carousel__control carousel__control--forward" for="0c">‚Æû</label>
          </div>
        
          
          
          
          
          <div class="carousel__controls">
              <label class="carousel__control carousel__control--backward" for="0b">‚Æú</label>
              <label class="carousel__control carousel__control--forward" for="0d">‚Æû</label>
          </div>
        
          
          
          
          
          <div class="carousel__controls">
              <label class="carousel__control carousel__control--backward" for="0c">‚Æú</label>
              <label class="carousel__control carousel__control--forward" for="0a">‚Æû</label>
          </div>
        
        <div class="carousel__track">
          <ul>
            
            <li class="carousel__slide"><img alt="/images/reverse-engineering-a-win95-game-III/dev-studio-opt.png" src="https://sidneys1.github.io/images/reverse-engineering-a-win95-game-III/dev-studio-opt.png" style="" /></li>
            
            <li class="carousel__slide"><img alt="/images/reverse-engineering-a-win95-game-III/open-workspace-opt.png" src="https://sidneys1.github.io/images/reverse-engineering-a-win95-game-III/open-workspace-opt.png" style="" /></li>
            
            <li class="carousel__slide"><img alt="/images/reverse-engineering-a-win95-game-III/select-project.png" src="https://sidneys1.github.io/images/reverse-engineering-a-win95-game-III/select-project.png" style="image-rendering: pixelated;" /></li>
            
            <li class="carousel__slide"><img alt="/images/reverse-engineering-a-win95-game-III/rebuild-all.png" src="https://sidneys1.github.io/images/reverse-engineering-a-win95-game-III/rebuild-all.png" style="" /></li>
            
          </ul>
        </div>
        <div class="carousel__indicators">
            
              <label class="carousel__indicator" for="0a"></label>
            
              <label class="carousel__indicator" for="0b"></label>
            
              <label class="carousel__indicator" for="0c"></label>
            
              <label class="carousel__indicator" for="0d"></label>
            
        </div>
    </div>
</div>

<style>
.carousel__holder {width: 100%; position: relative; padding-bottom: 460px; margin: 1rem 0 1rem;}
.carousel {
  height: 100%;
  width: 100%;
  overflow: hidden;
  text-align: center;
  position: absolute;
  padding: 0;
}
.carousel__controls,
.carousel__activator {
  display: none;
}

.carousel__activator:nth-of-type(1):checked ~ .carousel__track {
  -webkit-transform: translateX(-000%);
          transform: translateX(-000%);
}
.carousel__activator:nth-of-type(1):checked ~ .carousel__slide:nth-of-type(1) {
  transition: opacity 0.5s, -webkit-transform 0.5s;
  transition: opacity 0.5s, transform 0.5s;
  transition: opacity 0.5s, transform 0.5s, -webkit-transform 0.5s;
  top: 0;
  left: 0;
  right: 0;
  opacity: 1;
  -webkit-transform: scale(1);
          transform: scale(1);
}
.carousel__activator:nth-of-type(1):checked ~ .carousel__controls:nth-of-type(1) {
  display: block;
  opacity: 1;
}
.carousel__activator:nth-of-type(1):checked ~ .carousel__indicators .carousel__indicator:nth-of-type(1) {
  opacity: 1;
}

.carousel__activator:nth-of-type(2):checked ~ .carousel__track {
  -webkit-transform: translateX(-100%);
          transform: translateX(-100%);
}
.carousel__activator:nth-of-type(2):checked ~ .carousel__slide:nth-of-type(2) {
  transition: opacity 0.5s, -webkit-transform 0.5s;
  transition: opacity 0.5s, transform 0.5s;
  transition: opacity 0.5s, transform 0.5s, -webkit-transform 0.5s;
  top: 0;
  left: 0;
  right: 0;
  opacity: 1;
  -webkit-transform: scale(1);
          transform: scale(1);
}
.carousel__activator:nth-of-type(2):checked ~ .carousel__controls:nth-of-type(2) {
  display: block;
  opacity: 1;
}
.carousel__activator:nth-of-type(2):checked ~ .carousel__indicators .carousel__indicator:nth-of-type(2) {
  opacity: 1;
}

.carousel__activator:nth-of-type(3):checked ~ .carousel__track {
  -webkit-transform: translateX(-200%);
          transform: translateX(-200%);
}
.carousel__activator:nth-of-type(3):checked ~ .carousel__slide:nth-of-type(3) {
  transition: opacity 0.5s, -webkit-transform 0.5s;
  transition: opacity 0.5s, transform 0.5s;
  transition: opacity 0.5s, transform 0.5s, -webkit-transform 0.5s;
  top: 0;
  left: 0;
  right: 0;
  opacity: 1;
  -webkit-transform: scale(1);
          transform: scale(1);
}
.carousel__activator:nth-of-type(3):checked ~ .carousel__controls:nth-of-type(3) {
  display: block;
  opacity: 1;
}
.carousel__activator:nth-of-type(3):checked ~ .carousel__indicators .carousel__indicator:nth-of-type(3) {
  opacity: 1;
}

.carousel__activator:nth-of-type(4):checked ~ .carousel__track {
  -webkit-transform: translateX(-300%);
          transform: translateX(-300%);
}
.carousel__activator:nth-of-type(4):checked ~ .carousel__slide:nth-of-type(4) {
  transition: opacity 0.5s, -webkit-transform 0.5s;
  transition: opacity 0.5s, transform 0.5s;
  transition: opacity 0.5s, transform 0.5s, -webkit-transform 0.5s;
  top: 0;
  left: 0;
  right: 0;
  opacity: 1;
  -webkit-transform: scale(1);
          transform: scale(1);
}
.carousel__activator:nth-of-type(4):checked ~ .carousel__controls:nth-of-type(4) {
  display: block;
  opacity: 1;
}
.carousel__activator:nth-of-type(4):checked ~ .carousel__indicators .carousel__indicator:nth-of-type(4) {
  opacity: 1;
}


.carousel__control {
  height: 100%;
  vertical-align: middle;
  /* width: 30px; */
  margin-top: -15px;
  top: calc(50% - 0.5em);
  position: absolute;
  display: block;
  cursor: pointer;
  /* border-width: 5px 5px 0 0;
  border-style: solid;
  border-color: #fafafa; */
  font-size: 48pt;
  color: #fafafa;
  font-weight: 900;
  text-shadow: 0 0 10px  black;
  opacity: 0.35;
  /* opacity: 1; */
  outline: 0;
  z-index: 3;
  transition: opacity 250ms linear;
  /* box-shadow: 0 0 10px black; */
}
.carousel__control:hover {
  opacity: 1;
  transition: opacity 250ms linear;
}
.carousel__control--backward {
  left: 20px;
  /* -webkit-transform: rotate(-135deg);
          transform: rotate(-135deg); */
}
.carousel__control--forward {
  right: 20px;
  /* -webkit-transform: rotate(45deg);
          transform: rotate(45deg); */
}
.carousel__indicators {
  position: absolute;
  bottom: 20px;
  width: 100%;
  text-align: center;
}
.carousel__indicator {
  height: 10px;
  width: 10px;
  border-radius: 100%;
  display: inline-block;
  z-index: 2;
  cursor: pointer;
  opacity: 0.35;
  margin: 0 2.5px 0 2.5px;
  box-shadow: 0 0 10px black;
  transition: opacity 250ms linear;
}
.carousel__indicator:hover {
  opacity: 0.75;
  transition: opacity 250ms linear;
}
.carousel__track {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  padding: 0;
  margin: 0;
  transition: -webkit-transform 0.5s ease 0s;
  transition: transform 0.5s ease 0s;
  transition: transform 0.5s ease 0s, -webkit-transform 0.5s ease 0s;
}
.carousel__track .carousel__slide {
  display: block;
  top: 0;
  left: 0;
  right: 0;
  opacity: 1;
}

.carousel__track .carousel__slide:nth-of-type(1) {
  -webkit-transform: translateX(000%);
          transform: translateX(000%);
}

.carousel__track .carousel__slide:nth-of-type(2) {
  -webkit-transform: translateX(100%);
          transform: translateX(100%);
}

.carousel__track .carousel__slide:nth-of-type(3) {
  -webkit-transform: translateX(200%);
          transform: translateX(200%);
}

.carousel__track .carousel__slide:nth-of-type(4) {
  -webkit-transform: translateX(300%);
          transform: translateX(300%);
}


.carousel--scale .carousel__slide {
  -webkit-transform: scale(0);
          transform: scale(0);
}
.carousel__slide {
  height: 100%;
  position: absolute;
  opacity: 0;
  overflow: hidden;

  /* background-size: contain;
  background-repeat: no-repeat;
  background-position: center; */
}
.carousel__slide img {
	display: block;
	width: auto;
	height: auto;
	max-width: 100%;
	max-height: 460px;
}
.carousel__slide .overlay {height: 100%;}
.carousel--thumb .carousel__indicator {
  height: 30px;
  width: 30px;
}
.carousel__indicator {
  background-color: #fafafa;
}

.carousel__slide:nth-of-type(1),
.carousel--thumb .carousel__indicators .carousel__indicator:nth-of-type(1) {
}

.carousel__slide:nth-of-type(2),
.carousel--thumb .carousel__indicators .carousel__indicator:nth-of-type(2) {
}

.carousel__slide:nth-of-type(3),
.carousel--thumb .carousel__indicators .carousel__indicator:nth-of-type(3) {
}

.carousel__slide:nth-of-type(4),
.carousel--thumb .carousel__indicators .carousel__indicator:nth-of-type(4) {
}

</style>

<p>Of course, the pi√®ces de r√©sistance of having access to the source code: editor mode! Let‚Äôs see what it takes to get it
working. First, we‚Äôll need to get the source code building. Thanks to the lovely project <a href="https://dosbox-x.com/">DOSBox-X</a>, emulating
older Windows operating systems is as simple as following <a href="https://dosbox-x.com/wiki/Guide%3AInstalling-Windows-95">a guide</a>. I also sourced the following disk images:
<a href="https://archive.org/details/win-95-osr-2">Windows 95 OSR2</a><sup id="fnref:osr2" role="doc-noteref"><a href="#fn:osr2" class="footnote" rel="footnote">1</a></sup>, <a href="https://winworldpc.com/product/visual-c/4x">Visual C++ 4.2</a>, the <a href="https://archive.org/details/gamesdk">DirectX 1.0 SDK</a>, and the
<a href="https://archive.org/details/the-net-cd">ActiveMovie SDK</a><sup id="fnref:amalt" role="doc-noteref"><a href="#fn:amalt" class="footnote" rel="footnote">2</a></sup> (this disk contains many other interesting installers as well). If you‚Äôre planning on
building up such a virtual machine yourself, you‚Äôll have to find your own product keys, sorry.</p>

<p>Breezing through the guide leaves us with a fully functional Windows 95 install, with Visual C++ 4.2 (which includes the
Microsoft Developer Studio IDE - which we‚Äôll need), the DirectX SDK, and the ActiveMovie SDK. Our source code contains
an <code class="language-plaintext highlighter-rouge">.mdp</code> file, which is a Developer Studio project, so let‚Äôs open it and build the default project with
<kbd><kbd>Ctrl</kbd>+<kbd>B</kbd></kbd>!</p>

<div data-file-name=".log" style="clear: both;" class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>--------------------Configuration: 3dlib - Win32 Debug--------------------
Compiling...
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge code-split"><div class="highlight">
<pre class="highlight">
<code>decomp.cpp
<span class="err">fatal error C1083: Cannot open source file: 'C:\Sspyth\3dlib\decomp.cpp': No such file or directory</span>

Error executing cl.exe.
Sspyth.exe - 1 error(s), 4 warning(s)
</code></pre></div></div>

<p>Alright, some errors, but nothing we can‚Äôt solve. The first thing we notice is we‚Äôre missing a file
<samp>3DLIB\DECOMP.CPP</samp>. Poking around, we find there‚Äôs a file named <samp>3DLIB\aviDECOMP.CPP</samp>. A simple
file rename gets us past this error. Re-running the build gives us another error, now in the linking process. It can‚Äôt
seem to find the 3DLib and ActiveMovie libraries:</p>

<div class="language-plaintext highlighter-rouge" data-file-name=".log"><div class="highlight">
<pre class="highlight">
<code>e_frame.cpp
.\.\ztest.hpp(9) : <span class="err">fatal error C1083: Cannot open include file: 'strmif.h': No such file or directory</span>
</code></pre></div></div>

<div class="float-reverse">

  <p class="rfloat"><img src="https://sidneys1.github.io/images/reverse-engineering-a-win95-game-III/game-not-installed.png" alt="Game not installed" /></p>

  <p>That‚Äôs as easy as adding the full path to the ActiveMovie SDK‚Äôs include directory to the compiler path, and adding the
<samp>lib\StrmBase.lib</samp> file and the 3DLib output file to the linker properties. Our project now builds, and we
can verify that the game runs! Well, it tells us <samp>Game not installed, run the setup program.</samp>, but commenting
out a few lines in <code class="language-plaintext highlighter-rouge">CSspythApp::InitInstance()</code> fixes that:</p>

</div>

<div style="clear: both;" data-file-name="SSPYTH.CPP" class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Check for game installed</span>
<span class="c1">// char buffer[260];</span>
<span class="c1">// strcpy(buffer, "");</span>
<span class="c1">// GetRegString("Version", buffer, 20);</span>
<span class="c1">// if (strcmp(SSP_VERSION, buffer)) {</span>
<span class="c1">// 	AfxMessageBox("Game not installed, run the setup program.", MB_OK | MB_ICONSTOP);</span>
<span class="c1">// 	return FALSE;</span>
<span class="c1">// }</span>
</code></pre></div></div>

<p>Installing the game and pointing the <code class="language-plaintext highlighter-rouge">pakpath</code> setting in <samp>3D.INI</samp> to the install directory allows the game
to load assets and run!</p>

<p><img src="https://sidneys1.github.io/images/reverse-engineering-a-win95-game-III/game-running.png" alt="Game running" /></p>

<h3 id="editor-mode">Editor Mode</h3>

<p>So what do we need to enable editor mode? Let‚Äôs create a new build configuration just for this use case. We already know
we have to add <code class="language-plaintext highlighter-rouge">/D EDITOR</code> to the compiler settings, and doing so builds‚Ä¶ and fails. Why now?</p>

<div class="language-plaintext highlighter-rouge" data-file-name=".log"><div class="highlight">
<pre class="highlight">
<code>sspyth.obj : <span class="err">error LNK2001: unresolved external symbol "public: void __thiscall CEditFrame::EditDoor(void *)"(?EditDoor@CEditFrame@@QAEXPAX@Z)
sspyth__/Sspyth.exe : fatal error LNK1120: 7 unresolved externals</span>
Error executing link.exe.
Sspyth.exe - 8 error(s), 0 warning(s)
</code></pre></div></div>

<p>Ah, EditLib! Let‚Äôs add that to our linker options as well and try again. This time the build succeeds and
we can run the game as before. Now, how do we activate it? We know so far that: <strong>1)</strong> the game has to be in windowed mode,
so we set <code class="language-plaintext highlighter-rouge">fullscreen=0</code> in <samp>3D.INI</samp>; and <strong>2)</strong> there are some mystery values in the main window class that must be
set just-so to be ‚Äúin editor mode‚Äù. Thankfully now we can look at actual code! It turns out our
<code class="language-plaintext highlighter-rouge">CGameWnd::_updateWindowTitle()</code> decompilation above is actually named <code class="language-plaintext highlighter-rouge">CMainFrame::ShowPauseState()</code>:</p>

<div data-file-name="MainFrm.cpp" class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="n">CMainFrame</span><span class="o">::</span><span class="n">ShowPauseState</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">g_FullScreen</span><span class="p">)</span>
		<span class="k">return</span><span class="p">;</span>

	<span class="kt">char</span> <span class="n">buffer</span><span class="p">[</span><span class="mi">256</span><span class="p">];</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">m_game</span><span class="p">.</span><span class="n">m_pscene</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span> <span class="p">{</span>
		<span class="kt">char</span> <span class="n">drive</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span><span class="n">directory</span><span class="p">[</span><span class="mi">200</span><span class="p">],</span> <span class="n">name</span><span class="p">[</span><span class="mi">30</span><span class="p">],</span> <span class="n">extension</span><span class="p">[</span><span class="mi">5</span><span class="p">];</span>
		<span class="n">_splitpath</span><span class="p">(</span><span class="n">FileName</span><span class="p">,</span> <span class="n">drive</span><span class="p">,</span> <span class="n">directory</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">extension</span><span class="p">);</span>
		<span class="n">sprintf</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="s">"  S.S. Pythagoras  -  '%s'  "</span><span class="p">,</span> <span class="n">name</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">m_game</span><span class="p">.</span><span class="n">m_GameMode</span><span class="p">)</span>
			<span class="n">strcat</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="s">" - *** EDITOR MODE ***"</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">m_game</span><span class="p">.</span><span class="n">Paused</span><span class="p">())</span>
			<span class="n">strcat</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="s">" - Paused,  press 'p' to resume."</span><span class="p">);</span>
		<span class="k">else</span>
			<span class="n">strcat</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="s">" - Running..."</span><span class="p">);</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="n">sprintf</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="s">"  S.S. Pythagoras  -  NO ACTIVE LEVEL"</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="n">SetWindowText</span><span class="p">(</span><span class="n">buffer</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="float-reverse">

  <div class="rfloat">

    <div style="--left: 4" data-file-name="GAME.CPP" class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="n">CGame</span><span class="o">::</span><span class="n">Update</span><span class="p">(</span><span class="n">CKeyboard</span><span class="o">&amp;</span> <span class="n">keys</span><span class="p">)</span> <span class="p">{</span>
</code></pre></div>    </div>

    <div class="language-c++ code-split highlighter-rouge" style="--left: 4"><div class="highlight"><pre class="highlight"><code>	<span class="k">if</span> <span class="p">(</span><span class="n">keys</span><span class="p">.</span><span class="n">KeyDownWasUp</span><span class="p">(</span><span class="sc">'G'</span><span class="p">))</span>	<span class="p">{</span>
		<span class="n">m_GameMode</span> <span class="o">=</span> <span class="o">!</span><span class="n">m_GameMode</span><span class="p">;</span>
		<span class="n">GetMainFrame</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">ShowPauseState</span><span class="p">();</span>
	<span class="p">}</span>
</code></pre></div>    </div>

    <div class="language-c++ code-split highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">}</span>
</code></pre></div>    </div>

  </div>

  <p>Awesome, my guesses were <em>really</em> close. <code class="language-plaintext highlighter-rouge">unknown_334</code> is <code class="language-plaintext highlighter-rouge">m_game.m_pscene</code>, and <code class="language-plaintext highlighter-rouge">unknown_3714</code> is <code class="language-plaintext highlighter-rouge">m_game.m_GameMode</code>.
Let‚Äôs see if I‚Äôm right, and <code class="language-plaintext highlighter-rouge">m_GameMode</code> is changed with a <code class="language-plaintext highlighter-rouge">#ifdef EDITOR</code>-surrounded key input. <code class="language-plaintext highlighter-rouge">m_GameMode</code> is only
changed in two places in the code, both in <samp>GAME.CPP</samp>. The first is during initialization, where it is set to
<code class="language-plaintext highlighter-rouge">TRUE</code>. The second place is further down the file, in <code class="language-plaintext highlighter-rouge">CGame::Update(CKeyboard&amp;)</code>:</p>

</div>

<p>Ok, this isn‚Äôt surrounded by <code class="language-plaintext highlighter-rouge">#ifdef EDITOR</code>‚Ä¶ I suspect again that the ‚Äúfinal‚Äù version of the game saw a few code
changes that weren‚Äôt included in the copy of the code I have. But a little digging shows that <code class="language-plaintext highlighter-rouge">m_GameMode</code> alone has no
real effect, because just a little further down is the code to actually <em>perform</em> editor mode:</p>

<div data-file-name="GAME.CPP" class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">////////////////////////////////////////// EDITOR</span>
<span class="cp">#ifdef EDITOR
</span></code></pre></div></div>

<div class="language-c++ code-split highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="n">keys</span><span class="p">.</span><span class="n">KeyDownWasUp</span><span class="p">(</span><span class="sc">'I'</span><span class="p">))</span> <span class="p">{</span>
	<span class="n">GetApp</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">ShowEditFrame</span><span class="p">();</span>
	<span class="n">GetApp</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">m_editframe</span><span class="o">-&gt;</span><span class="n">OnInsertButton</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-c++ code-split highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#endif
</span></code></pre></div></div>

<div>

  <aside>

    <p>I‚Äôve skipped over some steps I had to take related to the release version PAK files referencing unused ‚Äî and
unincluded ‚Äî textures and models. I suspect the released game runs fine without them because it only loads used
textures, while the editor mode loads all textures (in case you want to use them) that are defined. As I don‚Äôt have the
original game assets (I only have source code and the PAK files distributed with the released game) I can‚Äôt recover
these textures and models, and so I just copied existing files and gave them the expected name.</p>

    <p>Another item of interest is that in activating editor mode <em>no</em> textures will load properly, as the files on-disk are
expected to be <a href="https://en.wikipedia.org/wiki/PCX">PCX</a> format, but when packing a PAK file the raw data is stored
unencoded (likely to increase loading speed). My extractor from Part I, PAKrat, just extracts the raw data into the
specified file path, leaving me with invalid PCX files. The actual format, as stored in the PAK, is like so:</p>

    <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">struct</span> <span class="p">{</span>
  <span class="c1">// Width and height of the data:</span>
  <span class="kt">int</span> <span class="n">columns</span><span class="p">,</span> <span class="n">rows</span><span class="p">;</span>
  <span class="c1">// The data itself (pretend C supports this):</span>
  <span class="kt">unsigned</span> <span class="kt">char</span><span class="p">[</span><span class="n">columns</span> <span class="o">*</span> <span class="n">rows</span><span class="p">];</span>
  <span class="c1">// The width, height, and x-y offset</span>
  <span class="c1">// of the desired sub-image:</span>
  <span class="kt">int</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">offset_x</span><span class="p">,</span> <span class="n">offset_y</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div>    </div>

  </aside>

  <p style="clear: both;">So, we need to press <kbd>G</kbd> to switch the game mode, and then <kbd>I</kbd> (I suspect for <strong>I</strong>nsert or
<strong>I</strong>nspect) <span class="aside-attn">will show the editor controls</span>! Once editor mode is active you can also
press <kbd>E</kbd> to <strong>E</strong>dit door and entity instances, or <kbd>T</kbd> to edit the focused object‚Äôs <strong>T</strong>ype. Let‚Äôs
give it a go:</p>

  <div class="popunder">
	
		<img class="pop" src="https://sidneys1.github.io/images/reverse-engineering-a-win95-game-III/editor-mode-thumb.png" alt="Editor Mode" title="Editor Mode" onclick="document.getElementById('205-editor-mode').showModal()" />
	
	<em>Click to zoom.</em>
</div>

  <dialog class="popover" id="205-editor-mode" onclick="document.getElementById('205-editor-mode').close()">
	<!-- <form method="dialog">
		<button class="close">X</button>
	  </form> -->
	<img class="pop-in" src="https://sidneys1.github.io/images/reverse-engineering-a-win95-game-III/editor-mode-opt.png" alt="Editor Mode" title="Editor Mode" loading="lazy" />
</dialog>

</div>

<h2 id="next-steps">Next Steps</h2>

<p>If there‚Äôs ever going to be a follow-up to this three-part post, there‚Äôs a few things I‚Äôd like to try:</p>

<ul>
  <li>Add modern <kbd>W</kbd><kbd>A</kbd><kbd>S</kbd><kbd>D</kbd> keyboard controls ‚Äî the current control scheme is
<kbd>A</kbd>/<kbd>Z</kbd> for forward/back, and <kbd>Shift</kbd>/<kbd>X</kbd> for left/right.</li>
  <li>Get the game running on modern versions of Windows ‚Äî I‚Äôd like to do this by getting it running ‚Äúwell‚Äù on each
newer OS starting with Windows XP and moving forward.</li>
  <li>Properly handle texture files when extracting ‚Äî PAKrat (from part I) doesn‚Äôt extract the PCX textures correctly.</li>
</ul>
<div class="footnotes" role="doc-endnotes">
  <ol>
    <li id="fn:osr2" role="doc-endnote">
      <p>The <a href="https://en.wikipedia.org/wiki/Windows_95#Editions">3rd release of Windows 95</a>, ‚ÄúOEM Release 2‚Äù, added support for FAT32 drives.¬†<a href="#fnref:osr2" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:amalt" role="doc-endnote">
      <p>Alternative source in disk 4 of <a href="https://archive.org/details/storm-1">Storm #1 - Internet Archive</a>.¬†<a href="#fnref:amalt" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
  </ol>
</div>

	</div>

	<hr/>
	<div class="multipart center">
		<em>This post has multiple parts:</em>
		<ul>
			
			
				
			
				
			
				
			
				
			
				
					
						<li><a href="https://sidneys1.github.io/reverse-engineering/2023/02/23/reverse-engineering-a-win95-game-I.html">Reverse Engineering a Windows 95 Game &ndash; Reversing Asset Storage</a> (Part I)</li>
					
					
				
			
				
					
						<li><a href="https://sidneys1.github.io/reverse-engineering/2023/03/16/reverse-engineering-a-win95-game-II.html">Reverse Engineering a Windows 95 Game &ndash; Reversing (Undocumented) Settings</a> (Part II)</li>
					
					
				
			
				
			
				
					
						<li style="list-style-type: disclosure-closed;"><em>Reverse Engineering a Windows 95 Game &ndash; Editor Mode, and Conclusion</em> (Part III)</li>
					
					
				
			
			
		</ul>
	</div><hr>

	<div class="donate">
		Like what you read?
		<a href="https://ko-fi.com/sidneys1" target="_blank" rel="noreferrer">
			Consider buying me a coffee.
		</a>
		<br/>
		<a href="https://ko-fi.com/sidneys1" target="_blank" rel="noreferrer"></a>
			<img height="50px" title="Buy me a Coffee" src="https://sidneys1.github.io/assets/coffee-cup-1.svg"/>
		</a>
	</div><p class="todo">Comments only visible under <code>site.mode == "www" or site.mode == "local-prod"</code>!</p><a class="u-url" href="https://sidneys1.github.io/reverse-engineering/2024/02/01/reverse-engineering-a-win95-game-III.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
	<data class="u-url" href="https://sidneys1.github.io/%20/"></data>

	<div class="wrapper">

		<h2 class="footer-heading">Sidneys1.com on GitHub Pages</h2>

		<div class="footer-col-wrapper">
			<div class="footer-col footer-col-1">
				<ul class="contact-list">
					<li class="p-name">Contact</li><li>
						<a class="u-email" href="mailto:admin@sidneys1.com">admin@sidneys1.com</a>
					</li><li>
						<a class="u-email" href="mailto:sidneys1@proton.me">sidneys1@proton.me</a>
					</li>
					<li>
						<a class="u-email" href="https://matrix.to/#/@sidneys1:matrix.org">
							Matrix Chat
						</a>
					</li>
					<li>
						<a class="u-email"
							href="https://simplex.chat/contact#/?v=1-2&smp=smp%3A%2F%2FSkIkI6EPd2D63F4xFKfHk7I1UGZVNn6k1QWZ5rcyr6w%3D%40smp9.simplex.im%2FQwoc8ketLODmigLCuVhCt8Eio_ruJFnj%23%2F%3Fv%3D1-2%26dh%3DMCowBQYDK2VuAyEAtEpK9f8ocpGt_MYmDVj0FrCIorSk7PSIVI-BmxLHUHE%253D%26srv%3Djssqzccmrcws6bhmn77vgmhfjmhwlyr3u7puw4erkyoosywgl67slqqd.onion">
							SimpleX Chat
						</a>
					</li>
					<li class="p-name" style="margin-top: 1em;">Alternative Access</li>
					<li>
						<a href="http://sidneys77crlfslcr7zmj3msmxchgnxhrxlp3p3kbaswo7twchjnicid.onion/">
							<img class="svg-icon" alt="Tor Logo" style="opacity: 50%; width: 26px; height: 16px;"
								width="26px" height="16px" src="https://sidneys1.github.io/assets/tor.svg"></img>
							<span>Sidneys1.com on Tor</span>
						</a>
					</li>
					<li>
						<a href="https://ipfs.io/ipns/sidneys1.com">
							<img class="svg-icon" alt="IPFS Logo" style="opacity: 50%; width: 26px; height: 16px;"
								width="16px" height="16px" src="https://sidneys1.github.io/assets/ipfs.svg"></img>
							<span>Sidneys1.com on IPFS</span>
						</a>
					</li>
					<li>
						<a href="https://sidneys1.github.io">
							<img class="svg-icon" alt="GitHub Logo" style="opacity: 50%; width: 26px; height: 16px;"
								width="16px" height="16px" src="https://sidneys1.github.io/assets/github.svg"></img>
							<span>Sidneys1.com on GitHub Pages</span>
						</a>
					</li>
				</ul>
			</div>

			<div class="footer-col footer-col-2">
				<ul class="social-media-list" style="margin-bottom: 5px;">
					<li>
						<a rel="me" href="https://infosec.exchange/@Sidneys1">
							<svg xmlns="http://www.w3.org/2000/svg" width="16px" height="16px"
								viewBox="0 0 216.4144 232.00976">
								<path fill="#828282"
									d="M211.80734 139.0875c-3.18125 16.36625-28.4925 34.2775-57.5625 37.74875-15.15875 1.80875-30.08375 3.47125-45.99875 2.74125-26.0275-1.1925-46.565-6.2125-46.565-6.2125 0 2.53375.15625 4.94625.46875 7.2025 3.38375 25.68625 25.47 27.225 46.39125 27.9425 21.11625.7225 39.91875-5.20625 39.91875-5.20625l.8675 19.09s-14.77 7.93125-41.08125 9.39c-14.50875.7975-32.52375-.365-53.50625-5.91875C9.23234 213.82 1.40609 165.31125.20859 116.09125c-.365-14.61375-.14-28.39375-.14-39.91875 0-50.33 32.97625-65.0825 32.97625-65.0825C49.67234 3.45375 78.20359.2425 107.86484 0h.72875c29.66125.2425 58.21125 3.45375 74.8375 11.09 0 0 32.975 14.7525 32.975 65.0825 0 0 .41375 37.13375-4.59875 62.915" />
								<path fill="#fff"
									d="M177.50984 80.077v60.94125h-24.14375v-59.15c0-12.46875-5.24625-18.7975-15.74-18.7975-11.6025 0-17.4175 7.5075-17.4175 22.3525v32.37625H96.20734V85.42325c0-14.845-5.81625-22.3525-17.41875-22.3525-10.49375 0-15.74 6.32875-15.74 18.7975v59.15H38.90484V80.077c0-12.455 3.17125-22.3525 9.54125-29.675 6.56875-7.3225 15.17125-11.07625 25.85-11.07625 12.355 0 21.71125 4.74875 27.8975 14.2475l6.01375 10.08125 6.015-10.08125c6.185-9.49875 15.54125-14.2475 27.8975-14.2475 10.6775 0 19.28 3.75375 25.85 11.07625 6.36875 7.3225 9.54 17.22 9.54 29.675" />
							</svg>
							<span class="username">Sidneys1</span>
						</a>
					</li>
				</ul><ul class="social-media-list"><li><a href="https://github.com/Sidneys1"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">Sidneys1</span></a></li><li><a href="https://youtube.com/Sidneys1"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#youtube"></use></svg> <span class="username">Sidneys1</span></a></li></ul>
</div>

			<div class="footer-col footer-col-3">
				<p>A home for all my ramblings on subjects such as programming, cybersecurity, photography, videography, video games, and whatever else I see fit.</p>
				<details class="snowflake">
					<summary><div><img class="snowflake" src="https://sidneys1.github.io/assets/snowflake.svg" /> Tor Snowflake</div></summary>
						<blockquote>Snowflake is a system that <strong>allows people from all over the world to access
								censored websites and applications</strong>. Similar to how VPNs assist users in getting
							around Internet censorship, Snowflake helps you avoid being noticed by Internet censors by
							making your Internet activity appear as though you're using the Internet for a regular video
							or voice call.
							<cite><a href="https://snowflake.torproject.org/" target="_blank"
									rel="noreferrer">The Tor Project</a></cite>
						</blockquote>
					<script>
						function load_snowflake() {
							const button = document.getElementById('load-snowflake');
							button.remove();
							const iframe = document.getElementById('snowflake-iframe');
							iframe.style.display = 'block';
							iframe.setAttribute('src', 'https://snowflake.torproject.org/embed.html')
							return false;
						}
					</script>
					<div style="text-align: center;"><button id="load-snowflake" onclick="return load_snowflake()">Help Stifle Censorship - Load Snowflake</button></div>
					<iframe id="snowflake-iframe" style="display: none;" src="" width="320" height="240" frameborder="0" scrolling="no"></iframe>
				</details>
			</div>
		</div>

	</div>

</footer>
</body>

</html>
